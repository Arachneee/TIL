쇼핑몰 인프라 설계

- 한국 고객을 대상으로 서비스한다.
	- aws zone을 seoul
- 메인 페이지에는 정해진 규칙에 따라 매 시간마다 상품 20개를 고정으로 보여준다.
	- 메인 페이지 캐싱 (캐시 타임 아웃 1시간)
- 카테고리의 이름은 변할 수 있으며, 변하는 경우 모든 사용자에게 적절한 시간 내에 반영되어 보여줘야 한다.
	- 카테고리 이름 캐싱 (캐시 타임 아웃 5분)
- 사용자는 상품명 또는 카테고리, 태그를 기준으로 상품을 검색할 수 있다.
	- 카테고리, 태그 로 인덱싱 or 파티셔닝 or 샤딩
	- 상품명 전문 검색
- 상품의 정보가 변경되면 즉시 또는 적절한 시간 내에 검색과 상품 상세 페이지에 반영되어야 한다.
	- 이벤트 큐로 검색 시스템과 상세페이지 시스템을 호출한다.
- 상품 검색, 상세 페이지는 고객이 상품을 탐색하고 주문을 하는 과정에서 매우 중요하므로 빠른 성능이 보장되어야 한다.
	- 전문 검색
- 상품 상세 페이지에서는 고객이 남긴 리뷰 평점을 함께 보여줘야 한다.
	- 평점 계산 시스템을 호출한다.
- 주문이 완료되면 고객에게 주문 정보를 이메일로 전달해야 한다.
	- 비동기로 이메일을 메시지 큐에 전달한다.
- 주문이 완료되면 판매자에게 상품이 판매되었음을 알려야 한다. 판매자는 주문 관리 페이지를 통해 상품이 출고되었음을 체크할 수 있어야 한다.
	- 비동기로 판매자에게 이벤트를 발행한다.
- 판매자에게 상품 판매를 알려주는 시스템의 TPS(초당 처리량)는 50이다.
- 피크타임은 오전 11시 ~ 12시(1시간)이며, 이때 주문의 TPS는 100이다.
	- 주문 TPS가 100인데 상품 판매 알림은 50이므로 메시지 큐를 사용하여 처리 속도를 맞춰준다.
- 1일 주문량은 평균 300만건이며, 하나의 DBMS에서 관리할 수 있는 주문 데이터의 양은 약 10억건이다.
	- 기간 별 파티셔닝
- 회원은 2000만명이며, 등록한 셀러는 20만개, 총 상품 수는 10억건이다.
	-  
- 전자상거래 등에서의 소비자보호에 관한 법률에 의거하여 고객의 주문 데이터는 5년간 보관되어야 한다.
	- 파티셔닝된 데이터 5년뒤 삭제