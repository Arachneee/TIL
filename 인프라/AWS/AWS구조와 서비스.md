# 기초 지식

## 용어
### 서버리스
- 서버리스 : 서비스가 이용될 때만 서버를 가동하는 방식. 서버가 이용된 시간만큼 발생.
- 프로비저닝 : 서버가 계속 실행중. 서버가 동작하고 있다면 그 시간만큼 요금이 발생.
### 개방형 클라우드와 폐쇄형 클라우드
- 개방형 클라우드 : 모든 사람이 쓸 수 있게 공개된 형태 (AWS)
	- Bare Metal 서비스 : 어떤 소프트웨어도 설치되어 있지 않은 상태
	- VPC(Virtual Private Cloud) : 사용자의 점유 공간 제공
- 폐쇄형 클라우드 : 시설 내부에 클라우드 컨테이너를 두고 전용 클라우드 환경을 구축
	- 독점 공간에서 보안을 충분히 확보한다.
	- 초기 투자비용이 크다.
### 서비스 제공 형태에 따른 분류
- SaaS(Software as a service) : 응용 프로그램을 서비스로 제공하는 형태 (Gmail, Dropbox, Office365, Zoom)
- PaaS(Platform as a service) : 응용 프로그램을 만들기 위한 기능을 서비스로 제공하는 형태. 
	- OS 및 미들웨어관리.
	- 관리형 서비스 : RDS, DynamoDB, Lambda
		- 유지보수는 AWS가 담당한다.
- IaaS(Infrastructure as service) : 응용 프로그램을 만들기 위한 기능을 서비스로 제공하는 형태. 
	- 서버 및 네트워크 기능만 제공
	- EC2, VPC, EBS

## AWS를 이해하기 위한 6가지 특징
- AWS와 사용자 간의 책임 공유
	- 공동 책임 모델
	- 하드웨어 문제는 AWS가 책임지고 복구한다.
- 글로벌 시스템 구축 가능
	- 리전 단위로 분리되어있다.
	- 가용 영역(AZ) : 각 리전에 여러개의 가용영역 존재
- 사용한 만큼만 이용료 지불
	- 종량 과금제
	- 서버 사양 X 시간 당 요금으로 계산한다.
- 서버의 자원과 수를 설정에서 쉽게 변경
	- CPU, 메모리량이나 수를 쉽게 변경할 수 있도록 구축된 서비스이다.
- 장애를 예상한 설계
	- 서버를 여러 AZ에 배포해 한 개 이상의 AZ에 장애가 발생하더라도 중단 없는 서비스를 제공한다.
	- 가용성 : 중단 없이 계속해서 실행할 수 있는 능력
- 설계의 모범이 되는 프레임워크
	- Well-Architected 프레임워크
		- 운영 우수성, 보안, 안정성, 성능 효율성, 비용 최적화, 지속 가능성
## 서비스 분류 및 대표적인 서비스
- 서비스 분류
	- 컴퓨팅
		- EC2 : 가상 서버
		- ECS : 컨테이너 서비스		
	- 스토리지
		- S3, EBS
	- 네트워크 및 콘텐츠 전송
		- VPC, Route 5S, ELB
	- 데이터베이스
		- RDS, DynamoDB
	- 보안, 자격 증명
- 관리형, 비관리형
	- 관리형
		- RDS, S3
	- 비관리형
		- EC2
# AWS 사용 시작
- 루트 계정과 IAM 계정 존재
- AWS를 웹 브라우저 말고 CLI로 조작할 수 있다.
	- 언제나 같은 결과를 얻을 수 있어 재현성이 높다.
- 프로그램으로도 조작할 수 있다.
	- AWS SDK를 설치해야한다.
- AWS 비용 관리
	- 종량 과금제
# 컴퓨팅 서비스
## 서버
- 시스템 처리를 실행할 컴퓨터
### 종류
- 웹 서버
	-  HTML, CSS, image 등이 저장해서 데이터를 제공한다.
	- EC2
- 데이터베이스 서버
	- 데이터 보존이나 갱신, 백업 등의 관리 기능, 데이터 검색 등을 실시하는 데이터 처리
	- RDS
- 메일 서버
	- 메일을 보내는 서버
	- SES
### EC2
- 가상 서버 서비스
- 인스턴스 설정
	- AMI : Amazon 머신 이미지. OS와 소프트웨어가 설정된 템플릿
	- 인스턴스 유형 : CPU와 Memory 사양 선택
		- 패밀리, 세대, 추가기능, 크기
			- 패밀리
				- T : 버스트 가능한 범용유형
				- M :  균형 잡힌 범용 유형
				- C : 컴퓨팅 최적화(vCPU 수가 많음)
				- R : 메모리 최적화
				- P : 고속 컴퓨팅
				- I : 스토리지 최적화
	- VPC : 가상머신이 위치할 네트워크
	- EBS :  스토리지 용량
	- 보안그룹 : 접근 권한 설정
- AWS Systems manager로 EC2 인스턴스에 연결할 수 있다.

### 가상 서버를 안전하게 외부에 공개
- 인바운드 규칙, 아웃바운드 규칙으로 허용가능한 IP를 선택한다.
-  규칙에 IP외에도 보안그룹을 넣을 수 도 있다.
## 부하에 따라 서버를 자동으로 추가, 삭제
- Amazon EC2 Auto Scaling
	- 자동으로 CPU 사용량에 따라 스케일 업, 다운을 한다.
	- RDS, ECS에서도 사용할 수 있다.

## 서버 없이 프로그램 실행
### Lambda
- 서버리스 컴퓨팅 서비스
- 코드가 실행될 때만 요금이 부과되므로 비용을 절감할 수 있다.
- 개발자는 코드만 관리하면 된다.
- 고가용성, 장애 대응성이 유지된다.
- EC2의 장점
	- OS 설정등을 그대로 사용할 수 있다.
	- 인스턴스 유형, OS, 네트워크 등을 자유롭게 설정할 수 있는 유연성이 있다.
	- 대량의 트래픽이나 접속을 상시 처리하는 경우 EC2 쪽이 저렴해질 수 있다.
	- 서버에 프로그램을 배포한다는 기존 방식으로 개발을 진행할 수 있다. Lambda는 AWS의 독자적인 설정 방법과 개발 방법이 있으므로 초보자에게는 어려울 수 있다.
### 함수 생성 및 실행
- Lambda 에서는 함수라는 단위로 프로그램 코드를 관리하고 처리한다.
## 서버리스 활용법 이해
-  API Gateway 와 Lambda를 결합해 사용자의 HTTP요청을 Lambda 함수로 처리할 수 있다.
- S3에 데이터를 저장할 때 자동처리
- EventBridge 서비스로 주기적으로 Lambda 함수 실행
- Lambda 함수에 IAM역할 형식으로 권한을 부여해야한다.
	- 기본으로는 CloudWatch 감시 서비스로 로그를 보내는 권한만 부여된다.
- GB-초 : 메모리 1GB의 함수가 1초간 실행된 경우의 요금
	- 요금이 별로 발생하지 않는다.
## 컨테이너
- 컨테이너는 가상화에 비해 가볍고 빠르다.
- 가상서버는 운영체제가 시작된 후 미들웨어, 응용 프로그램이 실행되는 형태이지만, 컨테이너는 응용프로그램을 실행하여 빠르다.
- 빌드, 배포에 드는 시간이 단축되므로 효율적인 개발이 가능하다.
- 동일한 개발 환경으로 시작할 수 있다.

## ECS로 누리는 컨테이너의 장점
- ECS : 관리형 컨테이너 오케스트레이션 서비스
- ECR : 컨테이너 이미지 레지스트리 서비스. 사용자 정의된 컨테이너 이미지를 AWS에서 관리할수 있고 ECS에도 쉽게 배포할 수 있다.
- ECS로 컨테이너를 기동할 때 플랫폼 선택
	- EC2
	- Fargate : AWS에서 관리하는 서버에서 컨테이너 실행
		- 컨테이너 런타임과 OS도 AWS에서 관리한다.

## 쿠버네티스를 보다 쉽게 사용할 수 있는 서비스
- EKS

# 스토리지 서비스
## 객체 스토리지
- S3는 ID로만 데이터를 관리한다.
- 버킷 : 객체를 저장하는 장소, 전 세계에서 고유해야한다.
- 객체 : 버킷에 저장된 데이터 본체. 한 객체의 최대 크기는 5TB
- 키 : 객체의 저장 URL경로다. 버킷 이름과 키 이름, 객체 이름을 조합해 고유해야한다.

### S3의 데이터를 브라우저나 프로그램에서 조작
- S3 API 제공
- 비용과 가용성이 다른 여러 스토리지 클래스를 제공한다.
- 생명주기 설정으로 자동으로 스토리지 클래스 변경도 가능하다.
### S3 버킷에 대한 접근 제어
- IAM 정책 : 사용자에 대한 권한 설정
- ACL(접근 제어 목록) : 객체 또는 버킷 단위로 설정할 수 있는 접근 제어
- 버킷 설정 : 버킷 단위로 설정하는 접근 제어
- https를 지원하지 않아 CloudFront를 사용하여 https 통신을 할 수 있게 구성한다.
### 데이터 암호화
- 데이터와 키 데이터를 조합해 데이터 내용을 타인이 볼 수 없게 한다.
- 버킷의 기본 암호화 기능을 활성화하면 자동으로 암호화를 한다.
## 가상 서버 데이터 저장을 위한 EBS
- EC2와 함께 사용하는 스토리지 서비스
- EC2의 HDD/SSD와 같은 역할을 하며 EC2에서 실행되는 응용 프로그램의 데이터, 로그, 설정 정보등을 저장하는 데 주로 사용한다.
- 스냅숏을 지원하여 백업이 가능하다.
- 사용자 AMI를 생성할 수 있다.
- EC2가 중지되어도 연결된 EBS는 계속 요금이 발생한다.