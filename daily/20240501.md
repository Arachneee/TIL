- GetMapping의 params 설정으로 쿼리파라미터를 받는 Get과 받지 않는 Get을 구분할 수 있다.
- Intellij로 돌리면 DB 초기화가 안되는 현상이 있었다. (현재 중요한 것은 아니라 생각해 뒤로 미룬다.)

- 고민사항 : 
    - Repository에 한방 쿼리 날리기 vs Service 객체에서 변환하기
        - 해당 시간의 예약 내역 조회
            - Repository에 한방 쿼리 날리기
            ```sql
            SELECT
                rt.start_at,
                rt.id,
                r.id is not null AS already_booked
            FROM reservation_times AS rt
            LEFT JOIN
                (SELECT id, time_id
                FROM reservations
                WHERE date = ? AND theme_id = ?) AS r
            ON rt.id = r.time_id
            ORDER BY start_at
            ```
            장점 : 쿼리를 한번만 날려 성능상에 이점이 있다. Service 객체의 로직이 간결한다.<br>
            단점 : ReservationTime객체는 Reservation을 모르지만 Repository에서 join을 통해 Reservation의 존재여부를 반환하는 것이 어색하다.<br>
            예약 여부라는 비지니스 로직이 Repository까지 넘어갔다.(findTimesWithBooked 라는 메소드명만 바꾸면 해결되는 문제일까?)

            - Service 객체에서 변환하기
            ```java
            public List<ReservationTimeBookedResponse> getReservationTimeBooked(LocalDate date, Long themeId) {
                List<Reservation> reservations = reservationRepository.findByDateAndThemeId(date, themeId);
                List<ReservationTime> times = reservationTimeRepostiroy.findAll();

                return times.stream()
                            .sorted(Comparator.comparing(ReservationTime::getStartAt).reversed())
                            .map(time -> ReservationTimeBookedResponse.of(time, isAlreadyBooked(reservations, time)))
                            .toList();
            }

            public boolean isAlreadyBooked(List<Reservation> reservations, ReservationTime time) {
                return reservations.stream()
                                    .anyMatch(reservation -> reservation.isTime(time));
            }
            ```
            장점 : Service객체에서 비지니스 로직을 볼 수 있다. Repository에 메소드를 추가하지 않아도 된다.<br>
            단점 : 쿼리를 2번 보내 성능이 떨어진다. 

            성능적으로는 현재 큰 차이가 나지 않아 고려사항이 아니다.
            Repository를 일급컬랙션으로 보고 도메인이라 생각할 수 있다. 하지만 ReservationTime은 Reservation을 모르는데 ReservationTime 일급컬랙션이 Reservation의 존재 여부를 반환하는 것이 말이 안된다.


    - 테스트를 어디까지 해야할까?
        - 통합테스트, 서비스테스트, 레포지토리테스트를 전부 수행하면 중복되는 테스트가 매우 많아 진다.
        - 객체를 분리하거나 필드를 추가하면 변경사항이 너무 많다.
        - 테스트가 있으면 나중에 유지보수하기에 좋다고 했는데 기능이 추가되면서 유지보수할 테스트코드가 너무 많아진다.
        - 정작 구현하고자 하는 기능보다 이전 테스트코드 리펙토링에 리소스를 많이 소모하게된다.
        
    - 얼마나 유연한 메소드를 만드는 것이 좋을까?
        - 일주일, 시작날짜, 수량 등 다양한 조건이 있을 때 해당 조건을 선택하는 역할은 누구인가?
        - 조건이 바뀔 가능성이 얼마인지에 따라 다르다.
        - 전부 충분히 바뀔 가능성이 있다.

    - `/themes/popular` 도 restful api인가?
        - 자원과 메소드로 식별가능하므로 RestFul하다고 할 수 있다.
