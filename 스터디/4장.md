### Mysql 서버
- MySQL 엔진 : 머리 역할
	- 커넥션 핸들러
	- SQL 인터페이스, 파서, 옵티마이저, 캐시, 버퍼
	- GROUP BY나 ORDER BY 같은 처리도 한다.
- 스토리지 엔진 : 손발 역할 
	- 종류
		- InnoDB
		- MyISAM
	- 데이터를 디스크에 저장하거나 읽어오는 역할
	
- Mysql 엔진이 스토리지 엔진을 조정하기 위해서는 핸들러를 사용해야한다.
### MySQL 스레드
- 포그라운드 스레드(사용자 스레드)
	- 역할
		- Mysql 서버에 접속된 클라이언트 수 만큼 존재
	- 특징
		- MyISAM : 디스크 쓰기 작업까지 처리
		- InnoDB : 데이터 버퍼와 캐시까지만 포그라운드 스레드가 처리
- 백그라운드 스레드(디스크 읽기, 쓰기 작업)
	- 역할
		- 인서트 버퍼 병합
		- 디스크에 로그 기록
		- InnoDB 버퍼 풀 데이터 디스크 기록
		- 디스크에서 버퍼로 읽기
		- 잠금이나 데드락 모니터링
	- 특징
		- InnoDB
			- 디스크 쓰기 작업을 버퍼링해서 일괄 처리한다.
			- 디스크에 완전히 저장될 때까지 기다리지 않아도 된다.
		- MyISAM
			- 버퍼링 기능을 사용하지 않는다.
### 메모리 할당
- 글로벌 메모리 영역
	- 테이블 캐시
	- InnoDB 버퍼 풀
	- InnoDB 어댑티브 해시 인덱스
	- InnoDB 리두 로그 버퍼
	- 모든 스레드에 의해 공유된다.
- 로컬 메모리 영역
	- 정렬 버퍼
	- 조인 버퍼
	- 바이너리 로그 캐시
	- 네트워크 버퍼
	- 세션 메모리 영역, 클라이언트 스레드가 쿼리를 처리하는 데 사용하는 메모리 영역
	- 공유되지 않는다.

-> 정렬이나 조인 버퍼는 스레드마다 필요하지만 InnoDB 버퍼는 여러 쓰레드가 공유해서 쓸 수 밖에 없다.

#### 쿼리 실행 구조
- 쿼리파서
	- 쿼리를 토큰으로 분리 후 트리 형태로 변환
	- 문법 오류 처리
- 전처리기
	- 트리의 문제점 확인
	- 테이블 명, 컬림 등 존재 여부, 권한 확인
- 옵티마이저
	- 저렴한 비용으로 빠르게 처리하는 방법 결정
- 실행 엔진
	- 핸들러를 실행계획에 따라 연결시키는 역할
- 핸들러(스토리지 엔진)
	- 디스크에 읽기/쓰기 역할

##### 질문
- 스레드 캐시와 스레드 풀은 같은 의미인가?